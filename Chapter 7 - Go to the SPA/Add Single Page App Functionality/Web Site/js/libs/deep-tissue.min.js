!function(a,b){"use strict";HTMLElement.prototype.ha=HTMLElement.prototype.hasAttribute;var c=document.querySelector,d=d,e=function(a,b){return new e.fn.init(a,b)};return e.fn=e.prototype={constructor:e,init:function(b,c){return b?(this.node="length"in b?b:[b],this.settings=this.extend({},this.settings,c),this.buildVendorNames(),this.touchType=a.navigator.msPointerEnabled?"pointer":"ontouchstart"in a?"touch":"mouse",this.hasMouse="ontouchstart"in a&&"onmousedown"in a,this.touchStart="pointer"===this.touchType?"MSPointerDown":"touch"===this.touchType?"touchstart":"mousedown",this.touchEnd="pointer"===this.touchType?"MSPointerUp":"touch"===this.touchType?"touchend":"mouseup",this.touchOut="pointer"===this.touchType?"MSPointerOut":"touch"===this.touchType?"touchcancel":"mouseout",this.touchMove="pointer"===this.touchType?"MSPointerMove":"touch"===this.touchType?"touchmove":"mousemove",this.touchCancel="pointer"===this.touchType?"MSPointerCancel":"touch"===this.touchType?"touchcancel":"mouseout",this.hasmsGesture?this.setupMSGesture():(this.setUpTouchGestures(),this.setupTouch()),this):b},version:"0.0.4",hasMouse:"",touchType:"",touchStart:"",touchEnd:"",touchOut:"",touchMove:"",touchCancel:"",hasmsGesture:a.MSGesture,setUpTouchGestures:function(){var a=this;try{[].forEach.call(this.node,function(b){b.addEventListener("gesturestart",function(a){a.preventDefault()}),b.addEventListener("gesturechange",function(b){a.gestureChange.call(a,b)}),b.gStartScale=1,b.gStartRotation=0})}catch(b){var d=c(".touch-log");return d.innerText="setUpTouchGestures is broken \r\n"+d.innerText,!1}},setupMSGesture:function(){var a=this,b=this.settings;try{[].forEach.call(this.node,function(c){var d=new MSGesture;d&&(d.target=c,c.addEventListener("MSPointerDown",function(e){d.addPointer(e.pointerId),a.setupSwipe(e,c,b)}),c.addEventListener("MSGestureChange",function(b){a.msGestureChange.call(a,b)}),c.addEventListener("MSPointerDown",function(d){a.doDoubleTap(d,c,b)}))})}catch(c){return!1}},swipeRightCallback:d,swipeLeftCallback:d,swipeUpCallback:d,swipeDownCallback:d,moveCallback:d,moveHorizontalCallback:d,moveVerticalCallback:d,rotateCallback:d,scaleCallback:d,tapCallback:d,doubleTapCallback:d,processGestureChange:function(a,b){var c=this,d=this.settings,e=a.target;e.ha(d.rotateIndicator)&&Math.abs(a.rotation)>d.rotateThreshold&&(d.autoRotate&&(e.style.transform=b.rotate(180*a.rotation/Math.PI)),this.rotateCallback(a,b)),e.ha(d.scaleIndicator)&&Math.abs(a.scale)>d.scaleThreshold&&(d.autoScale&&(e.style.transform=b.scale(a.scale)),this.scaleCallback(a,b)),e.ha(d.moveIndicator)&&(Math.abs(a.translationX)>d.moveThreshold||Math.abs(a.translationY)>d.moveThreshold)&&(d.autoMove&&(e.style.transform=b.translate(a.translationX,a.translationY,0)),this.moveCallback(a,b)),e.ha(d.horizontalIndicator)&&Math.abs(a.translationX)>d.moveThreshold&&(d.autoHorizontalMove&&(a.target.style.transform=b.translate(a.translationX,0,0)),this.moveHorizontalCallback(a,b)),e.ha(d.verticalIndicator)&&Math.abs(a.translationY)>d.moveThreshold&&(d.autoVerticalMove&&(a.target.style.transform=b.translate(0,a.translationY,0)),this.moveVerticalCallback(a,b)),e.ha(d.swipeRight)&&a.translationX>0&&a.translationX>d.swipeRightThreshold&&c.swipeRightCallback(a,b),e.ha(d.swipeLeft)&&a.translationX<0&&Math.abs(a.translationX)>d.swipeLeftThreshold&&c.swipeLeftCallback(a,b),e.ha(d.swipeUp)&&a.translationY<0&&Math.abs(a.translationY)>d.swipeUpThreshold&&c.swipeUpCallback(a,b),e.ha(d.swipeDown)&&a.translationY>0&&a.translationY>d.swipeDownThreshold&&c.swipeDownCallback(a,b),console.log(a.translationX+" - "+a.translationY)},gestureChange:function(a){var b=a.target,d=this.settings;a.preventDefault();var e=c(".touch-log");e.innerText="gesture Change \r\n"+b.ha(d.rotateIndicator)+"\r\n"+e.innerText,b.ha(d.rotateIndicator)&&Math.abs(a.rotation)>d.rotateThreshold&&(b.style.webkitTransform="rotate("+(b.gStartRotation+a.rotation)+"deg)",this.rotateCallback(a,m)),b.ha(d.scaleIndicator)&&Math.abs(a.scale)>d.scaleThreshold&&(b.style.webkitTransform="scale("+b.gStartScale*a.scale+") ",this.scaleCallback(a,m))},msGestureChange:function(b){a.MSCSSMatrix&&this.processGestureChange(b,new MSCSSMatrix(b.target.style.transform))},calculateTranslation:function(a,b){return{translationX:b.x-a.x,translationY:b.y-a.y}},setupIndicator:function(a,c,d,e,f){var g=this,h=g.settings;a!==b&&(g[c]=a),d&&(g.settings[e]=d),[].forEach.call(g.node,function(a){a.setAttribute(h[f],"true")})},PreventDefaultManipulationAndMouseEvent:function(a){return a.preventDefault?(a.preventDefault(),void 0):a.preventManipulation?(a.preventManipulation(),void 0):a.preventMouseEvent?(a.preventMouseEvent(),void 0):void 0},getTouchPoints:function(a){var b,c=this,d="undefined"!=typeof a.changedTouches?a.changedTouches:[a],e=d[d.length-1];return b="pointer"===c.touchType?{x:e.x,y:e.y}:"touch"===c.touchType?{x:e.pageX,y:e.pageY}:{x:a.pageX,y:a.pageY}},node:b,extend:function(){for(var a,c,d,e,f=arguments[0]||{},g=1,h=arguments.length;h>g;g++)if(null!==(e=arguments[g]))for(c in e)a=f[c],d=e[c],f!==d&&d!==b&&(f[c]=d);return f},div:b,support:{},buildVendorNames:function(){this.div=document.createElement("div"),this.support.transition=this.getVendorPropertyName("transition"),this.support.transitionDelay=this.getVendorPropertyName("transitionDelay"),this.support.transform=this.getVendorPropertyName("transform"),this.support.transformOrigin=this.getVendorPropertyName("transformOrigin"),this.support.transform3d=this.checkTransform3dSupport(),this.div=null},getVendorPropertyName:function(a){var b,c,d=["Moz","Webkit","O","ms"],e=a.charAt(0).toUpperCase()+a.substr(1);if(a in this.div.style)return a;for(c=0;c<d.length;++c)if(b=d[c]+e,b in this.div.style)return b},checkTransform3dSupport:function(){return this.div.style[this.support.transform]="",this.div.style[this.support.transform]="rotateY(90deg)",""!==this.div.style[this.support.transform]},doDoubleTap:function(a,b,c){var d=this;b.ha(c.doubleTapIndicator)&&b.ha(c.doubleTapStart)&&(b.removeAttribute(c.doubleTapStart),clearTimeout(b.getAttribute(c.doubleTapStart)),d.doubleTapCallback(a)),b.ha(c.doubleTapIndicator)&&!b.ha(c.doubleTapStart)&&b.setAttribute(c.doubleTapStart,setTimeout(function(){b.removeAttribute(c.doubleTapStart),clearTimeout(b.getAttribute(c.doubleTapStart))},c.doubleTapThreshold))},setupSwipe:function(a,b,c){var d=this;b.ha(c.swipeRight)&&(b.removeAttribute(c.swipeRightEnd),b.ha(c.swipeRightInit)||b.setAttribute(c.swipeRightInit,JSON.stringify(d.getTouchPoints(a)))),b.ha(c.swipeLeft)&&(b.removeAttribute(c.swipeLeftEnd),b.ha(c.swipeLeftInit)||b.setAttribute(c.swipeLeftInit,JSON.stringify(d.getTouchPoints(a)))),b.ha(c.swipeUp)&&(b.removeAttribute(c.swipeUpEnd),b.ha(c.swipeUpInit)||b.setAttribute(c.swipeUpInit,JSON.stringify(d.getTouchPoints(a)))),b.ha(c.swipeDown)&&(b.removeAttribute(c.swipeDownEnd),b.ha(c.swipeDownInit)||b.setAttribute(c.swipeDownInit,JSON.stringify(d.getTouchPoints(a))))},setupTouch:function(){var a=this,b=this.settings;[].forEach.call(this.node,function(c){var d=function(d){d.preventDefault(),a.touchMoveHandler.call(a,d,c,b)},e=function(d){d.preventDefault(),a.endTouchHandler.call(a,d,c,b)},f=function(d){d.preventDefault(),a.startTouchHandler.call(a,d,c,b)};c.addEventListener(a.touchStart,f),c.addEventListener(a.touchMove,d),c.addEventListener(a.touchEnd,e),a.hasMouse&&(c.addEventListener("mousedown",f),c.addEventListener("mousemove",d),c.addEventListener("mouseup",e))})},startTouchHandler:function(a,b,c){var d=this;c=this.settings,a.preventDefault(),console.log("touch start"),b.ha(c.moveIndicator)&&(b.removeAttribute(c.moveTouchEnded),b.ha(c.moveTouchInitial)||b.setAttribute(c.moveTouchInitial,JSON.stringify(d.getTouchPoints(a)))),b.ha(c.horizontalIndicator)&&(b.removeAttribute(c.horizontalTouchEnd),b.ha(c.horizontalTouchInit)||b.setAttribute(c.horizontalTouchInit,JSON.stringify(d.getTouchPoints(a)))),b.ha(c.verticalIndicator)&&(b.removeAttribute(c.verticalTouchEnd),b.ha(c.verticalTouchInit)||b.setAttribute(c.verticalTouchInit,JSON.stringify(d.getTouchPoints(a)))),d.setupSwipe(a,b,c),b.ha(c.tapIndicator)&&!b.ha(c.tapStart)&&b.setAttribute(c.tapStart,setTimeout(function(){clearTimeout(b.getAttribute(c.tapStart)),b.removeAttribute(c.doubleTapStart)},700)),d.doDoubleTap(a,b,c)},endTouchHandler:function(a,b,c){var d=this;c=this.settings,a.preventDefault(),b.ha(c.moveTouchInitial)&&b.setAttribute(c.moveTouchEnded,"true"),b.ha(c.horizontalIndicator)&&b.setAttribute(c.horizontalTouchEnd,"true"),b.ha(c.verticalIndicator)&&b.setAttribute(c.verticalTouchEnd,"true"),b.ha(c.swipeRight)&&b.setAttribute(c.swipeRightEnd,"true"),b.ha(c.swipeLeft)&&b.setAttribute(c.swipeLeftEnd,"true"),b.ha(c.swipeUp)&&b.setAttribute(c.swipeUpEnd,"true"),b.ha(c.swipeDown)&&b.setAttribute(c.swipeDownEnd,"true"),b.ha(c.tapIndicator)&&b.ha(c.tapStart)&&(d.tapCallback(a),clearTimeout(b.getAttribute(c.tapStart)),b.removeAttribute(c.tapStart))},touchMoveHandler:function(a,b,c){var d=this;if(c=this.settings,a.preventDefault(),b.ha(c.moveIndicator)&&!b.ha(c.moveTouchEnded)&&b.ha(c.moveTouchInitial)&&(e=JSON.parse(b.getAttribute(c.moveTouchInitial)),f=d.getTouchPoints(a),g=d.calculateTranslation(e,f),b.style[d.support.transform]="translate3D("+g.translationX+"px, "+g.translationY+"px, 0)"),b.ha(c.horizontalIndicator)&&!b.ha(c.horizontalTouchEnd)&&b.ha(c.horizontalTouchInit)){console.log("should -horizontal move");var e=JSON.parse(b.getAttribute(c.horizontalTouchInit)),f=d.getTouchPoints(a),g=d.calculateTranslation(e,f);Math.abs(g.translationX)>d.settings.moveThreshold&&(b.style[d.support.transform]="translate3D("+g.translationX+"px, 0, 0)")}if(b.ha(c.verticalIndicator)&&!b.ha(c.verticalTouchEnd)&&b.ha(c.verticalTouchInit)){var e=JSON.parse(b.getAttribute(c.verticalTouchInit)),f=d.getTouchPoints(a),g=d.calculateTranslation(e,f);Math.abs(g.translationY)>d.settings.moveThreshold&&(b.style[d.support.transform]="translate3D(0, "+g.translationY+"px, 0)")}if(b.ha(c.swipeRight)&&!b.ha(c.swipeRightEnd)&&b.ha(c.swipeRightInit)){console.log("should swipe right");var e=JSON.parse(b.getAttribute(c.swipeRightInit)),f=d.getTouchPoints(a),g=d.calculateTranslation(e,f);g.translationX>0&&Math.abs(g.translationX)>c.swipeRightThreshold&&(d.swipeRightCallback(a,null,g),b.setAttribute(c.swipeLeftInit,JSON.stringify(d.getTouchPoints(a))),b.setAttribute(c.swipeRightInit,JSON.stringify(d.getTouchPoints(a))))}if(b.ha(c.swipeLeft)&&!b.ha(c.swipeLeftEnd)&&b.ha(c.swipeLeftInit)){console.log("should swipe left");var e=JSON.parse(b.getAttribute(c.swipeLeftInit)),f=d.getTouchPoints(a),g=d.calculateTranslation(e,f);g.translationX<0&&Math.abs(g.translationX)>c.swipeLeftThreshold&&(d.swipeLeftCallback(a,null,g),b.setAttribute(c.swipeLeftInit,JSON.stringify(d.getTouchPoints(a))),b.setAttribute(c.swipeRightInit,JSON.stringify(d.getTouchPoints(a))))}if(b.ha(c.swipeUp)&&!b.ha(c.swipeUpEnd)&&b.ha(c.swipeUpInit)){console.log("should swipe up");var e=JSON.parse(b.getAttribute(c.swipeUpInit)),f=d.getTouchPoints(a),g=d.calculateTranslation(e,f);g.translationY<0&&Math.abs(g.translationY)>c.swipeUpThreshold&&(d.swipeUpCallback(a,null,g),b.setAttribute(c.swipeUpInit,JSON.stringify(d.getTouchPoints(a))),b.setAttribute(c.swipeDownInit,JSON.stringify(d.getTouchPoints(a))))}if(b.ha(c.swipeDown)&&!b.ha(c.swipeDownEnd)&&b.ha(c.swipeDownInit)){console.log("should swipe down");var e=JSON.parse(b.getAttribute(c.swipeDownInit)),f=d.getTouchPoints(a),g=d.calculateTranslation(e,f);g.translationY>0&&g.translationY>c.swipeDownThreshold&&(d.swipeDownCallback(a,null,g),b.setAttribute(c.swipeUpInit,JSON.stringify(d.getTouchPoints(a))),b.setAttribute(c.swipeDownInit,JSON.stringify(d.getTouchPoints(a))))}},swipeRight:function(a,b){return this.setupIndicator(a,"swipeRightCallback",b,"swipeRightThreshold","swipeRight"),this},swipeLeft:function(a,b){return this.setupIndicator(a,"swipeLeftCallback",b,"swipeLeftThreshold","swipeLeft"),this},swipeUp:function(a,b){return this.setupIndicator(a,"swipeUpCallback",b,"swipeUpThreshold","swipeUp"),this},swipeDown:function(a,b){return this.setupIndicator(a,"swipeDownCallback",b,"swipeDownThreshold","swipeDown"),this},move:function(a){return this.setupIndicator(a,"moveCallback",0,"","moveIndicator"),this},horizontalMove:function(a){return this.setupIndicator(a,"moveHorizontalCallback",0,"","horizontalIndicator"),this},verticalMove:function(a){return this.setupIndicator(a,"moveVerticalCallback",0,"","verticalIndicator"),this},rotate:function(a){return this.setupIndicator(a,"rotateCallback",0,"","rotateIndicator"),this},scale:function(a){return this.setupIndicator(a,"scaleCallback",0,"","scaleIndicator"),this},tap:function(a){var b=this;return a||(a=d),b.hasmsGesture?[].forEach.call(this.node,function(b){b.addEventListener("MSGestureTap",a,!1)}):this.setupIndicator(a,"tapCallback",0,"","tapIndicator"),this},dblTap:function(a){var b=this.settings;return document.querySelector(".touch-log"),a&&(b.doubleTapCallback=a),this.setupIndicator(a,"doubleTapCallback",0,"","doubleTapIndicator"),this},tapHold:function(a,b,c){var d=this;return a&&(d.tapHoldBeginCallback=a),this.hasmsGesture?(d.tapHoldBeginCallback=a,d.tapHoldEndCallback=b,d.tapHoldCancelCallback=c,[].forEach.call(this.node,function(a){d.preventTapHoldContext(a),a.addEventListener("MSGestureHold",function(a){d.tapHoldCallback.call(d,a)},!1)})):[].forEach.call(this.node,function(a){d.preventTapHoldContext(a),a.addEventListener(d.touchStart,function(b){d.setupTapHold(a,b)}),d.hasMouse&&a.addEventListener("mousedown",function(b){d.setupTapHold(a,b)})},!1),this},preventTapHoldContext:function(a){a.addEventListener("contextmenu",function(a){a.preventDefault()},!1)},setupTapHold:function(a,b){var c,d=this;c=setTimeout(function(){d.tapHoldBeginCallback.call(d,b),clearTimeout(c)},500),a.addEventListener(d.touchEnd,function(){clearTimeout(c)},!1),a.addEventListener(d.touchCancel,function(){clearTimeout(c)},!1)},tapHoldBeginCallback:d,tapHoldEndCallback:d,tapHoldCancelCallback:d,tapHoldCallback:function(a){var b=this;a.preventDefault(),a.detail&a.MSGESTURE_FLAG_BEGIN&&b.tapHoldBeginCallback.call(b,a),a.detail&a.MSGESTURE_FLAG_END&&b.tapHoldEndCallback.call(b,a),a.detail&a.MSGESTURE_FLAG_CANCEL&&b.tapHoldCancelCallback.call(b,a)},settings:{allowPageScroll:!0,logging:!1,swipeRightThreshold:25,swipeLeftThreshold:-25,swipeUpThreshold:25,swipeDownThreshold:25,moveThreshold:0,rotateThreshold:0,scaleThreshold:0,doubleTapThreshold:700,tapIndicator:"data-tap",tapStart:"data-tap-start",tapEnded:"data-tap-end",doubleTapIndicator:"data-dbltap",doubleTapStart:"data-dbltap-start",doubleTapEnded:"data-dbltap-end",rotateIndicator:"data-rotate",rotateEnded:"data-rotate-ended",rotateInitial:"data-rotate-initial",scaleIndicator:"data-scale",scaleEnded:"data-scale-ended",scaleInitial:"data-scale-initial",moveIndicator:"data-move",moveTouchEnded:"data-move-touch-ended",moveTouchInitial:"data-move-touch-initial",swipeRight:"data-swiperight",swipeRightInit:"data-swiperight-init",swipeRightEnd:"data-swiperight-end",swipeLeft:"data-swipeleft",swipeLeftInit:"data-swipeLeft-init",swipeLeftEnd:"data-swipeleft-end",swipeUp:"data-swipeup",swipeUpInit:"data-swipeup-init",swipeUpEnd:"data-swipeup-end",swipeDown:"data-swipedown",swipeDownInit:"data-swipedown-init",swipeDownEnd:"data-swipedown-end",horizontalIndicator:"data-move-horizontal",horizontalTouchInit:"data-horizontal-touch-initial",horizontalTouchEnd:"data-horizontal-touch-ended",verticalIndicator:"data-move-vertical",verticalTouchInit:"data-vertical-touch-initial",verticalTouchEnd:"data-vertical-touch-ended",autoMove:!0,autoRotate:!0,autoScale:!0,autoHorizontalMove:!0,autoVerticalMove:!0}},e.fn.init.prototype=e.fn,a.deeptissue=e}(window);